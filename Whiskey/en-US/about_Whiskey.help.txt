TOPIC
    about_Whiskey

SHORT DESCRIPTION
    Whiskey is a Continuous Integration/Continuous Delivery build platform.

LONG DESCRIPTION

    ## Overview

    Think of Whiskey as a build server you can run from the command line.
    Instead of writing a bunch of PowerShell/batch/whatever scripts, what you
    want to happen during your build is written as [YAML](http://yaml.org/)
    into a "whiskey.yml" text file and committed into the root of your
    source code repository.

    ## System Requirements

    * PowerShell 4
    * A build server. Jenkins, TeamCity, or Appveyor are supported.

    ## Getting Started

    1. Create a `.whiskey` directory in the root of your source code
       repository.
    2. [Download Whiskey](https://www.powershellgallery.com/packages/Whiskey)
       from the PowerShell Gallery and put it in the ".whiskey" directory.
    3. Copy the ".whiskey\build.ps1" script into the root of your repository.
    4. Copy the ".whiskey\whiskey.sample.yml" file into the root of your
       repository. Rename it to "whiskey.yml".
    5. Add the .whiskey directory and the build.ps1 and whiskey.yml files to
       your repository. If you're using Git, run:

           > git add .whiskey build.ps1 whiskey.yml
           > git commit -m "Adding Whiskey."

    6. Run your build:

           > .\build.ps1

    ## Configuring Your Build

    ### Overview

    A Whiskey build is made up of named pipelines. A pipeline is a list of tasks
    to perform when running that pipeline. Your first pipeline is empty:

       Build:

    A pipeline is a list of tasks. Each task has properties that control what
    the task does. In Yaml, you create a list by prefixing each item with
    `- `. Task properties should start on the next line and be indented four
    spaces. If a task has properties, the task name must end with a `:`. For
    example:

        Build:
        - TaskOne:
            Property1: Value
            Property2: Value2
        - TaskTwo:
            Property: Value
        # This task has no properties, so the ":" may be ommitted.
        - TaskThree

    YAML must be indented with spaces, not tabs.

    See the `about_Whiskey_Tasks` help topic to see Whiskey's tasks.

    ### Building

    There are three default built-in pipelines with special behavior:

    #### OnBuildStart

    If defined, the "OnBuildStart" pipeline will always run a single time before
    the default "Build" pipeline or any pipeline that was specifically invoked
    when starting the build.

    #### Build

    Under the "Build" pipeline in your whiskey.yml file, add tasks you
    want to run when building. For example, Whiskey's build process looks
    like this:

        Build:
        - Pester4:
            Path: Test\*.Tests.ps1

    In this example, Whiskey will run the "Pester4" task, which in this
    example, will run all the Pester tests that match the "Test\*.Tests.ps1"
    wildcard path.

    #### OnBuildEnd

    If defined, the "OnBuildEnd" pipeline will always run at the end of the
    build, regardless if the build succeeded or failed. This pipeline is useful
    for tasks that should ways run regardless of build outcome, such as cleanup
    or notification tasks.

    ### Stopping the build

    You may have pipelines or tasks that you only want to run under certain
    conditions. A common scenario is when a commit on the "master" branch is
    building on a build server. In that case, if all tests pass, you may want
    to run some additional tasks that package and publish your project.

    Use the "Stop" task with the "ExceptOnBranch" task property to control when
    these publishing related tasks run. The "ExceptOnBranch" property takes a
    list of branch names, wildcards are allowed. For example, this config would
    run the "PublishPowerShellModule" task only when run by a build server on
    the "master" branch:

        Build:
        - Pester4:
            Path: Test\*.Tests.ps1
        - Stop:
            OnlyBy: Developer
            ExceptOnBranch: master
        - PublishPowerShellModule:
            Path: mymodule
            RepositoryName: PSGallery

    ### API Keys and Credentials

    Some tasks, especially those used when publishing, need API keys or
    credentials. Whiskey does not let you add this sensitive information to
    your whiskey.yml file. If a publishing tool doesn't support some way of
    caching/saving and using credentials securely, you can add them to your
    build using the Whiskey API.

    Every task that needs a secret will have an `ApiKeyID` or `CredentialID`
    property. In your build.ps1 script, use this ID when calling Whiskey's
    `Add-WhiskeyApiKey` or `Add-WhiskeyCredential` functions to add the
    value of that API key or credential.

    For example, here is how Whiskey's own build process adds its PowerShell
    API key to Whiskey, which builds under [Appveyor](
    https://www.appveyor.com/), which exposes the API key as an environment
    variable:

        if( (Test-Path -Path 'env:POWERSHELL_GALLERY_API_KEY') )
        {
            Add-WhiskeyApiKey -Context $context -ID 'PowerShellGallery' -Value $env:POWERSHELL_GALLERY_API_KEY
        }


SEE_ALSO
    about_Whiskey_Tasks
    about_Whiskey_Variables
    about_Whiskey_Writing_Tasks
